##PHP内核--探究内存管理与缓存机制

PHP在运行时所需的内存，是一次性向操作系统申请开辟的，而不是分多次

 #### 内存的申请
 
heap层是PHP内存管理的核心实现，PHP底层对内存的管理， 围绕着小块内存列表（free_buckets）、 大块内存列表（large_free_buckets）和 剩余内存列表（rest_buckets）三个列表来分层进行的。
ZendMM向系统进行的内存申请，并不是有需要时向系统即时申请， 而是由
ZendMM的最底层（heap层）先向系统申请一大块的内存，通过对上面三种列表的填充， 建立一个类似于内存池的管理机制。


PHP对内存的分配，是结合PHP的用途来设计的，PHP一般用于web应用程序的数据支持， 单个脚本的运行周期一般比较短（最多达到秒级），内存大块整块的申请，自主进行小块的分配， 没有进行比较复杂的不相临地址的空闲内存合并，而是集中再次向系统请求。 这样做的好处就是运行速度会更快，缺点是随着程序的运行时间的变长， 内存的使用情况会“越来越多”（PHP5.2及更早版本）。 所以PHP5.3之前的版本并不适合做为守护进程长期运行。 （当然，可以有其他方法解决，而且在PHP5.3中引入了新的GC机制）

[PHP内核--探究内存管理与缓存机制](https://blog.csdn.net/ty_hf/article/details/52905896)